[toc]

# 计算机调度简介

## 为什么需要研究计算机调度？

一般来说计算机会同时处理多个请求，但是**资源是有限的，调度就是用来协调请求对资源的使用的方法**。

## 计算机是如何进行调度的？

一般调度器会通过**维护运行队列的方式**来管理任务。例如Linux会用红黑树来实现运行队列。任务在执行时若触发一定条件，则会停止执行，如果还需要执行，会被重新加入运行队列。

调度器的决策包括：

- 从运行队列选择下一个运行的任务

- 决定执行该任务的CPU核心
- 决定该任务被允许执行的时间（时间片）

决策完成后系统中的相应机制便会将任务执行在对应的CPU核心上。

## 计算机调度应该达到什么样的效果？

常用的调度指标有：

性能指标

- 吞吐量

  单位时间内处理的任务数量

- 周转时间

  任务从被发起直至执行结束所需要的时间

- 响应时间

  任务从发起知道第一次向用户返回输出以相应用户所需时间

非性能指标

- 公平性
- 资源利用率

特殊需求

- 实时性
- 能耗

任务所需的调度指标：

- **批处理任务**如机器学习的训练、复杂的科学计算，无需与用户交互，尽可能快的完成，需要：**吞吐量尽可能高，周转时间尽可能短**。
- **交互式任务**如程序调试，希望**响应时间足够短**。
- 有截至时间要求的**实时任务**如车载系统中的自动刹车，要求实时任务在截止时间前完成**满足实时性**。
- 移动设备有**待机时间**的要求，即移动设备上的操作系统调度要尽可能**降低能耗**。

## 设计实现计算机调度有何困难？

- 调度指标多样性

  不同任务的调度指标选取不一样，**切换应用场景时，旧的调度器不能适应新场景**

- 调度可参考的信息有限

  应用场景动态变化，调度器**只能通过有限的信息做出调度决策**

- 任务间的复杂交互

  同一程序的任务间可能有相互关联的逻辑，需要相互依赖，调度器**不能独立地调度这些任务**

- 许多方面存在权衡

  - 调度开销与调度效果

    调度器需要做出合理决策，需要统筹足够多的信息，进行运算，**导致决策时间变长**

  - 优先级与公平性

    一方面保证**高优先级任务优先执行**，另一方面**不能让低优先级的任务执行的时间过短**甚至无法执行。

  - 性能与能耗

    调度器过分追求性能，总是让CPU维持高速运转，导致**单位时间能耗过高**。

# 调度机制

## 任务是如何在计算机系统中被调度的？



## 长期、中期、短期调度的具体职责是？



# 单核调度策略

## 单核场景有哪些调度策略？



## 不同的单核调度策略的优点和缺点是什么？



# 多核调度策略

## 在多核场景下有哪些调度策略？这些调度策略的优点与缺点分别是什么？



## 多核调度如何考虑负载均衡？



## 多和调度如何考虑能耗？



# 调度进阶机制

## 如何指定执行任务的CPU核心，提高数据处理的局部性？



## 如何设置与统一当前操作系统上的不同调度策略？



