[toc]
# 命令行界面
和Hive交互的最常用方式，可以创建标、检查模式以及查询表等。

## 变量和属性
--define key=value实际上和--hivevar key=value等价，两者都可以让用户在命令行定义用户自定义变量以便在Hive脚本中引用，来满足不同情况的执行。这个功能只有Hive 0.8.0和之后的版本支持。

当用户使用这个功能是，Hive将会把这些键值对放到**hivevar命名空间**，这样可以和其他3种内置命名空间（hiveconf，system，env）进行区分。

> 变量或者属性在不同的上下文中使用的术语，但是在大多数情况下功能一致。

|命名空间|使用权限|描述|
|:-|:-|:-|
|hivevar|rw|用户自定义变量|
|hiveconf|rw|Hive相关配置属性|
|system|rw|Java定义配置属性|
|env|read only|Shell环境定义环境变量|

Hive变量内部以Java字符串方式存储，用户可以在查询中引用变量，Hive会用变量值替换查询中的变量引用，然后将查询语句提交。

CLI中可以用SET命令显示和修改变量值。

```sql
hive --define foo=bar
hive> set foo;
foo=bar

hive> set hivevar:foo;
hivevar:foo=bar

hive> set hivevar:foo=bar2;

hive> set foo;
foo=bar2

hive> set hivevar:foo;
hivevar:foo=bar2
```
可以看到前缀hivevar可选。CLI中查询语句的变量会被替换掉再提交给查询处理器，考虑如下CLI会话。

```sql
hive> create table toss1(i int, ${hivevar:foo} string);

hive> describe toss1;
i       int
bar2    string

hive> create table toss2(i2 int, ${foo} string);

describe toss2;
i2      int
bar2    string

hive> drop table toss1;
hive> drop table toss2;
```
env命名空间和system命名空间和hivevar不同，必须使用前缀来指定系统属性和环境变量。参考如下例子。
```sql
YEAR=2012 hive -e "SELECT * FROM mytable WHERE year = ${env:YEAR}";
```

## Hive中的一次使用命令
Hive -e可以执行单个或多个查询后立即退出Hive CLI。
```shell
$ hive -e "SELECT * FROM mytable LIMIT 3";
OK
name1 10
name2 20
name3 30
Time taken: 4.955 seconds
$
```
应急的时候可以使用这个功能将查询结果保存到一个文件中，增加-S选项可以开启静默模式，除去结果无关的输出信息。

### 查询属性名
当用户不能完整记住某个属性名称时，可以通过下列命令进行查询二无需滚动set命令的输出结果。假设用户查询哪个属性制定了管理表的“warehouse”路径可以通过如下命令查询:
```shell
hive -S -e "set" | grep warehouse
hive.metastore.warehouse.dir=/user/hive/warehouse
hive.warehouse.subdir/inherit/perms=false
```

## 通过文件执行Hive查询
Hive可以使用-f文件名的方式指定文件中的查询语句