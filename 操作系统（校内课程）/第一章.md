[toc]

操作系统四大管理功能：CPU、内存、I/O、存储

CPU管理：

- 进程管理
- 处理机调度与死锁

操作系统是直接控制和管理计算机硬件、软件资源，合理地对各类作业进行调度，以方便用户使用的程序集合。

操作系统的目标：方便性、有效性、可扩充性、开放性

操作系统的作用：

- 作为用户和计算机间的接口
- 作为计算机系统资源的管理者
- 实现了对计算机资源的抽象

无OS->脱机I/O->有OS

# 批处理系统

缓解人机速度矛盾

- 使用系统提供的作业控制语言（JCL）描述自己对作业运行的控制意图，将控制信息连同作业一起提交给计算机。
- 由OS去控制、调度各作业的运行并输出结果
- 由于作业进入系统后用户不再干预，提高了效率。

## 单道批处理系统的缺陷

系统中的资源得不到充分的利用，因为内存中仅有一道程序，该程序发出I/O请求后，CPU就处于等待状态，必须在I/O完成后继续运行。

## 多道批处理系统

用户提交的作业都线存放在外存上并形成一个“后备队列“，然后由作业调度程序按一定算法从后被队列选择若干个作业调入内存，共享CPU和各种资源。

### 优点

多道程序并发执行，共享资 源。资源利用率提升，吞吐量增大。

### 缺点

平均周转时间长，没有人机交互功能。（不能控制自己的作业执行，不能调试程序或在运行过程中输入参数）

### 需要解决的问题

- 处理机争用问题
- 内存分配和保护问题
- I/O设备分配问题

- 文件组织和管理问题

- 作业管理问题

- 用户与系统的接口问题

# 分时系统

一台计算机连接多个中断，用户通过各自的终端把作业送入计算机，计算机通过终端向用户报告作业运行情况。

- 多路性：即同时性，宏观上同时，微观上轮流
- 独立性：每个用户感觉独占主机
- 及时性：较短时间相应（1-3秒）
- 交互性：用户请求多方面服务

# 实时系统

提高系统的响应时间，对随即发生的外部事件作出及时相应并在规定的时间内对其进行处理。

- 实时控制系统
- 实时信息系统

对于实时操作系统，当外部事件到达系统后，系统需要尽可能在可控，确定的时间范围内将该事件处理完。该类系统广泛使用在车控、飞控等。这类系统的任务有非常高的时效性，因此会有一个明确的截止时间，可以分为：

- 硬实时任务：必须在截止时间完成，否则系统无法承担任务处理超过截至时间的后果。（紧急刹车）
- 软实时任务：可以偶尔在超过截止时间完成，结果可以接受。（视频播放）

根据触发时间分为三类：

- 周期任务：到达系统时间遵循一定周期的任务。设周期为T，运行时间C（最坏运行时间），截止时长（达到开始，以任务截止时间未结束的时间长度）D，有0 ≤ C ≤ D ≤ T。
- 偶发任务：不会周期性到达系统的任务，而且还要满足连续两个相同偶发任务（相同逻辑的两个实例）到达系统的时间间隔有最小值。
- 非周期任务：没有相同任务最小时间间隔的限制。一般是软实时任务。如键盘输入，按钮操作等。

# 操作系统基本特性

没有并发和共享就没有虚拟与异步。

## 并发并行

- 并发：指两个或多个事件在同一时间件给内发生
- 并行：指两个或多个事件在同一时刻发生

进程

- 若对内存中的多个程序都分别建立一个进程，他们就可以并发执行，这样就能极大地提高系统资源的利用率，增加系统吞吐量

进程是**最小的资源管理单元**，不同的进程共享不同的资源。

并发在宏观上同时发生，微观上交替发生。操作系统的并发性是指操作系统同时运行着多个程序。操作系统就是伴随多道程序技术出现的，因此操作系统和程序并发是一起诞生的。

## 共享

操作系统中的资源共内存中的多道程序共同使用。

- 互斥共享方式：打印机
- 同时共享方式：磁盘

## 并发和共享的关系

并发性是指操作系统中同时存在着多个运行着的程序

共享性是指系统中的资源可供内存中多个并发执行的进程共同使用

使用QQ发送文件A，同时使用微信发送文件B

- 两个进程正在并发执行（并发性）
- 需要共享地访问硬盘资源（共享性）

## 虚拟

- 内存需求量比实际内存量大：空分复用技术（虚拟内存）
- 单核处理器运行多个程序：时分复用技术（虚拟CPU）

## 异步

资源有限，并发的程序会争抢系统资源，进程执行是走走停停不是一贯到底的。

只有系统拥有并发性，才可能导致异步性。

# 操作系统主要功能

## 处理机管理功能

在传统多道程序环境下，要让作业进行，必须为它创建一个或几个进程，并为之分配资源。运行结束后立即撤销该进程。

主要功能：作业创建进程，撤销已结束进程，控制进程在运行过程中的状态转换。

### 进程同步

- 进程互斥方式
- 进程同步方式

### 进程通信



### 进程调度

- 作业调度
- 进程调度

## 存储器管理功能

### 内存分配

- 为每道程序分配空间

- 提高利用率

- 允许动态申请内存空间

### 内存保护

- 确保每道用户程序只在自己空间内运行

### 地址映射

### 内存扩充

## 设备管理

### 缓冲管理

- CPU和I/O速度不匹配

- 缓冲区和缓冲机制，改善性能

### 设备分配

- 设备控制表、控制器等，将系统资源按照某种策略进行分配

### 设备处理

- 设备驱动程序，实现CPU和设备控制器之间通信，完成指定的I/O操作

## 文件管理功能

### 存储器空间管理

分配外存空间，提高外存利用率，提高提取速度

### 目录管理

- 文件名、属性、物理位置的管理

- 文件共享、目录查询、存取

### 文件的读写管理和保护

## 系统安全

- 认证技术
- 密码技术
- 访问控制
- 反病毒

